(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{129:function(e,t,a){e.exports=a.p+"static/media/\u957f\u8bc4\u8bba_03.b2edfa21.png"},130:function(e,t,a){e.exports=a(258)},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},258:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(9),o=a.n(c),l=(a(135),a(13)),i=a(21),r=a(15),m=a(14),d=a(16),u=(a(136),a(137),a(138),a(26)),h=a.n(u),p=a(46),y=a.n(p),f=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(r.a)(this,Object(m.a)(t).call(this))).state={display:"block",dataArr:[],headImg:y.a,h:""},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"trans_bg",style:{display:this.state.display},onClick:this.none.bind(this)}," "),s.a.createElement("div",{className:"leftNav",style:{display:this.state.display}},s.a.createElement("div",{className:"user_box"},s.a.createElement("img",{src:this.state.headImg,className:"head_img"}),s.a.createElement("h3",{className:"userName"},"LBJ"),s.a.createElement("div",{className:"col_box"},s.a.createElement("span",{className:"iconfont icon-star col_ico",onClick:this.toCollect.bind(this)}," "),s.a.createElement("span",{className:"col",onClick:this.toCollect.bind(this)},"\u6211\u7684\u6536\u85cf"),s.a.createElement("span",{className:"iconfont icon-xiazai down_ico"}," "),s.a.createElement("span",{className:"down"},"\u79bb\u7ebf\u4e0b\u8f7d")),s.a.createElement("div",{className:"col_index"},s.a.createElement("span",{className:"iconfont icon-yemian-copy-copy col_ico2"}," "),s.a.createElement("span",{className:"index_txt",onClick:this.toIndex.bind(this)},"\u9996\u9875")))))}},{key:"componentDidMount",value:function(){}},{key:"toCollect",value:function(){this.props.data1.history.push("/collect")}},{key:"toIndex",value:function(){this.props.data1.history.push("/index")}},{key:"leftNav",value:function(){this.setState({display:"block"})}},{key:"none",value:function(){document.body.style.overflow=""}}]),t}(s.a.Component),E=a(12),g=a(261),v=(a(97),a(66),a(28)),b=a(38),_=a.n(b),N=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(r.a)(this,Object(m.a)(t).call(this))).onOpenChange=function(){var t=e.state.open;e.setState({open:!e.state.open}),document.body.style.overflow=!1===t?"hidden":""},e.state={imgArr:[],contentArr:[],arr1014:[],arr1013:[],time:"",arr:[],story:[],title:"\u9996\u9875",date:"",display:"none",headImg:y.a,open:!1,fn:function(e){var t=e.replace("2019","").substr(0,2)+"\u6708"+e.replace("2019","").substr(2)+"\u65e5",a=e.substr(0,4)+","+e.substr(4,2)+","+e.substr(6)+",00:00:00";return t+" "+["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"][new Date(a).getDay()]}},e.head=s.a.createRef(),e.today=s.a.createRef(),e.day=s.a.createRef(),e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=s.a.createElement("div",null,"return (",s.a.createElement("div",null,s.a.createElement(f,{data1:this.props})),"); }");return s.a.createElement("div",null,s.a.createElement(v.c,{icon:s.a.createElement(v.b,{type:"ellipsis"}),onLeftClick:this.onOpenChange},"Basic"),s.a.createElement(v.a,{className:"my-drawer",style:{minHeight:document.documentElement.clientHeight},enableDragHandle:!0,contentStyle:{color:"#A6A6A6",textAlign:"center",paddingTop:42},sidebar:t,open:this.state.open,onOpenChange:this.onOpenChange}),s.a.createElement("div",{className:"header_wrap",ref:this.head},s.a.createElement("div",{className:"header"},s.a.createElement("span",{className:"iconfont icon-spread-h-bar nav_logo",onClick:this.onOpenChange}," "),s.a.createElement("h1",null,this.state.title),s.a.createElement("span",{className:"iconfont icon-lingdang mess_logo"}," "),s.a.createElement("span",{className:"iconfont icon-sandian set_logo"}," "))),s.a.createElement("div",{className:"auto_play",ref:"auto"},s.a.createElement(g.a,{autoplay:!0},this.state.imgArr.map((function(e,t){return s.a.createElement("div",{key:t,className:"img_box"},s.a.createElement(E.b,{to:{pathname:"/detail",state:{id:e.id}}},s.a.createElement("h1",null,e.title," "),s.a.createElement("img",{key:t,src:e.image,className:"top_img"})))}))),","),s.a.createElement("div",{className:"index_content"},s.a.createElement("div",{className:"today_content",ref:this.today},s.a.createElement("h4",null,"\u4eca\u65e5\u70ed\u95fb"),s.a.createElement("ul",{className:"content_list"},this.state.contentArr.map((function(t,a){return s.a.createElement("li",{key:a,onClick:e.toDetail.bind(e,t.id)},s.a.createElement(E.b,{to:{pathname:"/detail",state:{id:t.id}}},s.a.createElement("p",{className:"content_text"},t.title),s.a.createElement("img",{src:t.images[0],className:"content_img"})))})))),this.state.arr.map((function(t,a){return s.a.createElement("div",{className:"day_content",key:a,ref:e.day,id:"day"},s.a.createElement("h4",null,e.state.fn(t.date)),t.stories.map((function(t,a){return s.a.createElement("ul",{className:"content_list",key:a},s.a.createElement("li",{key:a,onClick:e.toDetail.bind(e,t.id)},s.a.createElement(E.b,{to:{pathname:"/detail",state:{id:t.id}}},s.a.createElement("p",{className:"content_text"},t.title),s.a.createElement("img",{src:t.images,className:"content_img"}))))})))}))))}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("scroll",this.handleScroll.bind(this)),h.a.get("/api/4/news/latest").then((function(t){e.setState({imgArr:t.data.top_stories,contentArr:t.data.stories,time:t.data.date,date:t.data.date})}))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeouter),this.setState=function(e,t){}}},{key:"handleScroll",value:function(e){var t=this,a=document.documentElement.scrollTop||document.body.scrollTop;if(null!==this.today.current){this.state.contentArr.length>0&&(a>=this.today.current.offsetTop?this.setState({title:"\u4eca\u65e5\u70ed\u95fb"}):this.setState({title:"\u9996\u9875"}));var n=document.getElementsByClassName("day_content");this.state.arr.length>0&&Array.from(n).map((function(e,n){a>=e.offsetTop-t.head.current.offsetHeight&&t.setState({title:e.innerText.substr(0,12)})}));var s=this.state.arr;a>=document.documentElement.scrollHeight-document.documentElement.clientHeight&&h.a.get("/api/4/news/before/"+this.state.time).then((function(e){s.push(e.data),t.setState({arr:s,time:e.data.date})}))}}},{key:"toDetail",value:function(e){this.props.history.push({pathname:"/detail",state:{id:e}})}},{key:"toCollect",value:function(){this.props.history.push("/collect")}},{key:"toIndex",value:function(){this.props.history.push("/index")}},{key:"leftNav",value:function(){document.body.style.overflow="hidden",this.setState({display:"block"})}},{key:"none",value:function(){document.body.style.overflow="",this.setState({display:"none"})}}]),t}(s.a.Component),k=a(34),x=function(e){return s.a.createElement("div",null,s.a.createElement(k.d,null,e.routes.map((function(e,t){return"*"===e.path?s.a.createElement(k.a,{key:t,to:e.redirect}):s.a.createElement(k.b,{key:t,path:e.path,component:e.component})}))))},O=a(127),C=a(128),j=new(function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(r.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).data=[],a}return Object(d.a)(t,e),t}(a.n(C).a)),w=new O.Dispatcher;w.register((function(e){switch(e.actionType){case"collect":j.data.push(e.actionParams),j.emit("collected")}}));var S={state:j,dispatcher:w},A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(r.a)(this,Object(m.a)(t).call(this,e))).state={contentArr:[],css:"",display:"none",arr:[{ico:"icon-weibo1",bg:"#f13f19",text:"\u65b0\u6d6a\u5fae\u535a"},{ico:"icon-weixin1",bg:"#60c84f",text:"\u5fae\u4fe1"},{ico:"icon-pengyouquan-copy",bg:"#72cf29",text:"\u5fae\u4fe1\u670b\u53cb\u5708"},{ico:"icon-fenxiang_yinxiangbiji",bg:"#5ab540",text:"\u5370\u8c61\u7b14\u8bb0"},{ico:"icon-youdaoyunbiji1",bg:"#30a1ed",text:"\u6709\u9053\u4e91\u7b14\u8bb0"},{ico:"icon-0052",bg:"#2369c8",text:"QQ"},{ico:"icon-sandian1",bg:"#7f7f7f",text:"\u66f4\u591a\u5e73\u53f0"}],id:"",count:[],color:"#fff",num:0,opacity:1,data:S.state.data,flag:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return setTimeout((function(){var t=document.getElementsByClassName("img-place-holder")[0];document.createElement("img").src=e.state.contentArr.image,void 0!==t&&(t.innerHTML='<img src="'.concat(e.state.contentArr.image,'" class="con_img" /> <h2>').concat(e.state.contentArr.title,'</h2> <div class="img_source">').concat(e.state.contentArr.image_source,"</div>"))}),0),s.a.createElement("div",null,s.a.createElement("div",{className:"header_wrap_d"},s.a.createElement("div",{className:"header_d",id:"header_d",style:{opacity:this.state.opacity}},s.a.createElement("span",{className:"back_ico iconfont icon-arrow-left-lg-copy",onClick:this.back.bind(this)}," "),s.a.createElement("span",{className:"iconfont icon-fenxiang share_ico",onClick:this.share.bind(this)}," "),s.a.createElement("span",{className:"iconfont icon-star col_ico",onClick:this.collected.bind(this),style:{color:1==this.state.flag?"yellow":"#fff"}}," "),s.a.createElement(E.b,{to:{pathname:"/comment",state:{id:this.props.location.state.id}}},s.a.createElement("span",{className:"iconfont icon-huifu replay_ico"}," ")," ",s.a.createElement("i",null,this.state.count.comments)),s.a.createElement("span",{className:"iconfont icon-good_active-copy good_ico"}," ")," ",s.a.createElement("i",null,this.state.count.popularity))),s.a.createElement("div",{className:"detail_content"},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.contentArr.body}}),s.a.createElement("link",{href:this.state.contentArr.css,rel:"stylesheet"})),s.a.createElement("div",{className:"trans_bg",style:{display:this.state.display},onClick:this.none.bind(this)}," "),s.a.createElement("div",{className:"share_box",style:{display:this.state.display}},s.a.createElement("h1",null,"\u5206\u4eab"),s.a.createElement("ul",{className:"share_list"},this.state.arr.map((function(e,t){return s.a.createElement("li",{key:t},s.a.createElement("a",{href:"#"},s.a.createElement("span",{className:"iconfont "+"".concat(e.ico)+" share_ico",style:{background:"".concat(e.bg)}}," "),s.a.createElement("span",{className:"share_text"},e.text)))})))))}},{key:"componentDidMount",value:function(){var e=this;S.state.data.map((function(t,a){console.log(t.id,111),console.log(e.props.location.state.id,2222),t.id===e.props.location.state.id&&(console.log(111111),e.state.flag=!0)})),this.setState({flag:this.state.flag}),S.state.on("collected",(function(){e.setState({data:S.state.data})})),window.addEventListener("scroll",this.handleScroll.bind(this)),h.a.get("/api/4/news/"+this.props.location.state.id).then((function(t){e.setState({contentArr:t.data,css:t.data.css[0],id:t.data.id})})),h.a.get("/api/4/story-extra/"+this.props.location.state.id).then((function(t){e.setState({count:t.data})}))}},{key:"handleScroll",value:function(){var e=document.documentElement.scrollTop||document.body.scrollTop;e>this.state.num?(this.state.num=e,this.state.opacity-=.08,this.state.opacity<=0&&(this.state.opacity=0)):(this.state.num=e,this.state.opacity+=.08,this.state.opacity>=1&&(this.state.opacity=1)),this.setState({num:this.state.num,opacity:this.state.opacity})}},{key:"collected",value:function(){var e=this;console.log(this.state.flag,1111),!1===this.state.flag?(S.dispatcher.dispatch({actionType:"collect",actionParams:{title:this.state.contentArr.title,image:this.state.contentArr.images[0],flag:!0,id:this.props.location.state.id}}),this.setState({flag:!0})):(S.state.data.map((function(t,a){t.id===e.props.location.state.id&&S.state.data.splice(a,1)})),this.setState({flag:!1}))}},{key:"share",value:function(){this.setState({display:"block"})}},{key:"none",value:function(){this.setState({display:"none"})}},{key:"back",value:function(){this.props.history.go(-1)}}]),t}(s.a.Component),T=a(129),I=a.n(T),H=void 0,D=[{path:"/index",component:N},{path:"/detail",component:A},{path:"/comment",component:function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(r.a)(this,Object(m.a)(t).call(this))).state={long:[],short:[],display1:"block",display2:"none",empty:I.a,flag:!1,tag:!1,display:!0},e.up=s.a.createRef(),e.head=s.a.createRef(),e.long=s.a.createRef(),e.all=s.a.createRef(),e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{ref:this.all},s.a.createElement("div",{className:"header_wrap_c"},s.a.createElement("div",{className:"header_c",ref:this.head},s.a.createElement("span",{className:"back_ico iconfont icon-arrow-left-lg-copy",onClick:this.back.bind(this)}," "),s.a.createElement("span",{className:"comment_num"},this.state.long.length+this.state.short.length," \u6761\u70b9\u8bc4"),s.a.createElement("span",{className:"iconfont icon-bianji edit_ico"}," "))),s.a.createElement("div",{className:"long_content",ref:this.long},s.a.createElement("div",{className:"long_head"},s.a.createElement("div",{className:"long_num"},this.state.long.length," \u6761\u957f\u8bc4")),s.a.createElement("div",{className:"empty_content",style:{display:0===this.state.long.length?"block":"none"}},s.a.createElement("img",{src:this.state.empty,className:"empty_img"})),s.a.createElement("ul",{className:"long_list"},this.state.long.map((function(t,a){return s.a.createElement("li",{key:a},s.a.createElement("div",{className:"user_mess"},s.a.createElement("img",{src:t.avatar,className:"user_img"}),s.a.createElement("span",{className:"user_name"},t.author),s.a.createElement("div",{className:"likes_count"},s.a.createElement("span",{className:"iconfont icon-good_active-copy likes_ico"}," "),s.a.createElement("span",{className:"likes_num"},t.likes))),s.a.createElement("div",{className:"comment_txt"},t.content),function(){if(void 0!==t.reply_to)return s.a.createElement("div",{className:"replay_box"},s.a.createElement("p",{className:!1===e.state.flag?"short_replay":"replay_txt"},s.a.createElement("i",{className:"author"},"//",t.reply_to.author,"\uff1a"),t.reply_to.content))}(),s.a.createElement("div",{className:"comment_time"},s.a.createElement("div",{className:"time"},_()(parseInt("".concat(1e3*t.time))).format("YYYY-MM-DD HH:mm:ss").substr(5,11)),s.a.createElement("div",{className:"up_btn",onClick:e.upreplay.bind(e),style:{display:void 0===t.reply_to?"none":"block"}},!1===e.state.flag?"\u5c55\u5f00":"\u6536\u8d77")))})))),s.a.createElement("div",{className:"short_wrap",ref:this.up,onClick:this.upload.bind(this)},s.a.createElement("div",{className:"short_head"},s.a.createElement("div",{className:"short_num"},s.a.createElement("h2",null,this.state.short.length," \u6761\u77ed\u8bc4"),s.a.createElement("span",{className:"iconfont ".concat(!0===this.state.display?"icon-shuangjiantouxia":"icon-jiantou2"," more_ico")}," ")))),s.a.createElement("div",{className:"short_content",style:{display:this.state.display2}},s.a.createElement("ul",{className:"long_list"},this.state.short.map((function(t,a){return s.a.createElement("li",{key:a},s.a.createElement("div",{className:"user_mess"},s.a.createElement("img",{src:t.avatar,className:"user_img"}),s.a.createElement("span",{className:"user_name"},t.author),s.a.createElement("div",{className:"likes_count"},s.a.createElement("span",{className:"iconfont icon-good_active-copy likes_ico"}," "),s.a.createElement("span",{className:"likes_num"},t.likes))),s.a.createElement("div",{className:"comment_txt"},t.content),function(){if(void 0!==t.reply_to)return s.a.createElement("div",{className:"replay_box"},s.a.createElement("p",{className:!1===e.state.flag?"short_replay":"replay_txt"},s.a.createElement("i",{className:"author"},"//",t.reply_to.author,"\uff1a"),t.reply_to.content))}(),s.a.createElement("div",{className:"comment_time"},s.a.createElement("div",{className:"time"},_()(parseInt("".concat(1e3*t.time))).format("YYYY-MM-DD HH:mm:ss").substr(5,11)),s.a.createElement("div",{className:"up_btn",onClick:e.upreplay.bind(e),style:{display:void 0===t.reply_to?"none":"block"}},!1===e.state.flag?"\u5c55\u5f00":"\u6536\u8d77")))})))))}},{key:"componentDidMount",value:function(){var e=this;h.a.get("/api/4/story/"+this.props.location.state.id+"/long-comments").then((function(t){e.setState({long:t.data.comments})})),h.a.get("/api/4/story/"+this.props.location.state.id+"/short-comments").then((function(t){e.setState({short:t.data.comments})}))}},{key:"componentWillUnmount",value:function(){clearInterval(H),clearTimeout(this.timeouter),this.setState=function(e,t){}}},{key:"upreplay",value:function(){this.setState({flag:!this.state.flag})}},{key:"upload",value:function(){var e=this;clearInterval(H),!0===this.state.display?(null!==this.up.current.offsetTop&&(H=setInterval((function(){document.documentElement.scrollTop+=6,document.documentElement.scrollTop>=e.up.current.offsetTop&&clearInterval(H),document.documentElement.scrollTop>=e.all.current.clientHeight-document.documentElement.clientHeight&&clearInterval(H)}),.1)),this.setState({display:!1,display2:"block"})):null!==this.up.current.offsetTop&&(H=setInterval((function(){document.documentElement.scrollTop-=6,document.documentElement.scrollTop<=0&&(console.log(2222),clearInterval(H),setTimeout((function(){e.setState({display:!0,display2:"none"})})))}),.1))}},{key:"pack",value:function(){}},{key:"back",value:function(){this.props.history.go(-1)}}]),t}(s.a.Component)},{path:"/collect",component:function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(r.a)(this,Object(m.a)(t).call(this))).onOpenChange=function(){var t=e.state.open;e.setState({open:!e.state.open}),document.body.style.overflow=!1===t?"hidden":""},e.state={display:"none",dataArr:[],headImg:y.a,h:"",open:!1,data:S.state.data},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=s.a.createElement("div",null,"return (",s.a.createElement("div",null,s.a.createElement(f,{data1:this.props})),"); }");return s.a.createElement("div",{id:"collect_wrap",style:{height:this.state.h}},s.a.createElement(v.c,{icon:s.a.createElement(v.b,{type:"ellipsis"}),onLeftClick:this.onOpenChange},"Basic"),s.a.createElement(v.a,{className:"my-drawer",style:{minHeight:document.documentElement.clientHeight},enableDragHandle:!0,contentStyle:{color:"#A6A6A6",textAlign:"center",paddingTop:42},sidebar:e,open:this.state.open,onOpenChange:this.onOpenChange}),s.a.createElement("div",{className:"header_wrap_col"},s.a.createElement("div",{className:"header_col"},s.a.createElement("span",{className:"iconfont icon-spread-h-bar nav_logo",onClick:this.onOpenChange,style:{color:this.state.dataArr.color}}," "),s.a.createElement("span",{className:"coll_num"},this.state.data.length," \u6761\u6536\u85cf"))),s.a.createElement("div",{className:"coll_content"},s.a.createElement("ul",{className:"coll_list"},this.state.data.map((function(e,t){return s.a.createElement("li",{key:t},s.a.createElement(E.b,{to:{pathname:"/detail",state:{id:e.id}}},s.a.createElement("p",{className:"coll_text"},e.title),s.a.createElement("img",{src:e.image,className:"coll_img"})))})))))}},{key:"componentDidMount",value:function(){var e=this;S.state.on("collected",(function(){e.setState({data:S.state.data})})),this.setState({h:document.documentElement.clientHeight+"px"})}},{key:"toCollect",value:function(){this.props.history.push("/collect")}},{key:"toIndex",value:function(){this.props.history.push("/index")}},{key:"leftNav",value:function(){this.setState({display:"block"})}},{key:"none",value:function(){this.setState({display:"none"})}}]),t}(s.a.Component)},{path:"/nav",component:f},{path:"*",redirect:"/index"}],M=function(e){function t(){return Object(l.a)(this,t),Object(r.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(x,{routes:D}))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(E.a,null," ",s.a.createElement(M,null)," "),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},46:function(e,t,a){e.exports=a.p+"static/media/pic4.6244f7a6.jpg"}},[[130,1,2]]]);
//# sourceMappingURL=main.3b417f71.chunk.js.map